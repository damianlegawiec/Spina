<div data-controller="file" class="flex items-center h-12 border-b border-gray-200 px-8 hover:bg-white group">
  <div class="font-medium text-gray-800 flex-1 w-56 text-sm flex items-center relative">
    <span class="truncate" data-file-target="filename"><%= @attachment.file.filename %></span>
    
    <%= form_with model: @attachment, url: helpers.spina.admin_attachment_path(@attachment), html: {class: 'w-full max-w-sm pr-3 hidden', data: {file_target: "form", action: "ajax:success->file#replaceHTML"}} do |f| %>
      <div class="flex items-center w-full">
        <div class="relative w-full mr-2">
          <%= text_field_tag :filename, @attachment.file.filename.base, class: 'form-input w-full h-9 pr-10 text-sm', placeholder: "Filename", data: {file_target: "input"} %>
          <div class="absolute top-0 right-2 h-full flex items-center text-gray-400">
            <%= ".#{@attachment.file.filename.extension}" %>
          </div>
        </div>
        
        <button type="submit" class="btn btn-default px-2">
          <%= helpers.heroicon("check", style: :solid, class: "w-5 h-5") %>
        </button>
      </div>
    <% end %>
    
    <div data-file-target="actions" class="absolute opacity-0 group-hover:opacity-100 flex items-center right-0 pr-3">
      <button type="button" data-action="file#rename" class="btn btn-default h-7 px-2 mr-2 text-xs">
        <%= helpers.heroicon('pencil', style: :solid, class: 'w-4 h-4 mr-1 text-gray-600') %>
        Rename
      </button>
    </div>
  </div>
  <div class="text-gray-500 text-sm whitespace-nowrap flex items-center">
    <%= helpers.number_to_human_size @attachment.file.byte_size %>
    <div class="uppercase ml-2 h-5 flex items-center rounded-md <%= content_type_color %> text-white font-semibold px-1 text-xs">
      <%= content_type %>
    </div>
  </div>
  <div class="text-gray-500 text-xs w-32 text-right whitespace-nowrap"><%=l @attachment.created_at, format: :short %></div>
  <div class="">
    <%= link_to helpers.admin_attachment_path(@attachment), class: "block py-3 px-4 ml-2 text-gray-500 hover:text-gray-900", data: {method: :delete, controller: "confirm", confirm_message: "Are you sure? This attachment <span class='font-semibold'>might</span> be in use on a page."} do %>
      <%= helpers.heroicon('trash', class: 'w-5 h-5') %>
    <% end %>
  </div>
</div>